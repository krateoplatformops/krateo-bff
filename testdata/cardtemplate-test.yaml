---
apiVersion: v1
kind: Namespace
metadata:
  name: test-system
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: httpbin-endpoint
  namespace: test-system
stringData:
  server: http://httpbin.org
  username: tik
  password: tok
---
apiVersion: widgets.ui.krateo.io/v1alpha1
kind: CardTemplate
metadata:
  name: card-test
  namespace: test-system
spec:
  app:
    icon: ApartmentOutlined
    color: GREEN
    title: "{{ jq .crd.metadata.annotation[title] }}"
    date: "{{ jq .crd.metadata.creationTimestamp}}"
    content: "{{ jq .crd.metadata.annotation[content] }}"
    tags: "{{ jq .crd.spec.categories }}"
    actions:
    - enabled: true
      path: "/apis/apiextensions.k8s.io/v1/customresourcedefinitions/postgresqls.composition.krateo.io"
      endpointRef:
        name: httpbin-endpoint
        namespace: krateo-system
      verb: DELETE
  api:
  - name: httpbin
    path: "/anything"
    endpointRef:
      name: httpbin-endpoint
      namespace: test-system
    verb: GET
    headers:
    - 'Accept: application/json'
    payload: |
      {"name": "John", "surname": "Doe"}
