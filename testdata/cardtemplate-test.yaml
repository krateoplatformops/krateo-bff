---
apiVersion: v1
kind: Namespace
metadata:
  name: test-system
---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: httpbin-endpoint
  namespace: test-system
stringData:
  server: http://httpbin.org
  username: tik
  password: tok
---
apiVersion: widgets.ui.krateo.io/v1alpha1
kind: CardTemplate
metadata:
  name: card-test
  namespace: test-system
spec:
  app:
    icon: ApartmentOutlined
    color: GREEN
    title: {{ jq .httpbin.json.firstName }} {{ jq .httpbin.json.lastName }}
    content: "{{ jq .httpbin.json.location }}"
    tags: {{ jq .httpbin.json.hobbies | join(",")" }}
    actions:
    - enabled: true
      path: "/apis/apiextensions.k8s.io/v1/customresourcedefinitions/postgresqls.composition.krateo.io"
      endpointRef:
        name: httpbin-endpoint
        namespace: krateo-system
      verb: DELETE
  api:
  - name: httpbin
    path: "/anything"
    endpointRef:
      name: httpbin-endpoint
      namespace: test-system
    verb: GET
    headers:
    - 'Accept: application/json'
    payload: |
      {
        "firstName": "Charles",
        "lastName": "Doe",
        "age": 41,
        "location": {
          "city": "San Fracisco",
          "postalCode": "94103"
        },
        "hobbies": [
          "chess",
          "netflix"
        ]
      }
