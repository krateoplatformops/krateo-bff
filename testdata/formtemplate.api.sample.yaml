---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: dummyjson-endpoint
  namespace: demo-system
stringData:
  #debug: "true"
  server-url: https://dummyjson.com
---
apiVersion: widgets.ui.krateo.io/v1alpha1
kind: FormTemplate
metadata:
  name: fireworksapp-with-api
  namespace: demo-system
spec:
  definitionRef:
    name: fireworksapp
    namespace: demo-system
  resourceRef:
    name: fireworksapp
    namespace: demo-system
  data:
    - path: git.replaceValues.key1
      value: ${ .product1.title }
    - path: git.replaceValues.key2
      value: ${ .product1.stock }
    - path: git.replaceValues.key2
      value: ${ .product1.category }
  api:
  - name: product1
    path: "/products/1"
    endpointRef:
      name: dummyjson-endpoint
      namespace: demo-system
    verb: GET
    headers:
    - 'Accept: application/json'
